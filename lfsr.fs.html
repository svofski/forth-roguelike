<html>
<head>
<style type=text/css>
div.code {
  padding:0.5em;
  font-size:large;
  line-height:110%;
}
div.code a.name {
  font-weight:bold;
}
div.code a.name:target {
  background-color:#ff7
}
div.code a.ref {
  text-decoration:none;
  color:#007
}
div.code a.ref:hover {
  text-decoration:underline;
}
.footer {
  font-size:x-small;
  line-height:110%;
}
</style>
</head>
<body>
<div class=code>
<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2410>variable</a>&nbsp;<a class=name name=497>lfsr</a></code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.2.1660>hex</a></code>
<br>

<code>
0ace1&nbsp;<a class=ref href=lfsr.fs.html#497>lfsr</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0010>!</a></code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=498>rand16</a>&nbsp;</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;roll&nbsp;dice,&nbsp;--&nbsp;nextrand&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=lfsr.fs.html#497>lfsr</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0650>@</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1290>dup</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;lfsr&nbsp;lfsr&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;1&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2162>rshift</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2260>swap</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;new_lfsr&nbsp;old_lfsr&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;1&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0720>and</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;lfsr&nbsp;lsb&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.2.0260>0&lt;></a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1700>if</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;lfsr&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;&nbsp;&nbsp;0b400&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2490>xor</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;lfsr^0xb400&nbsp;)&nbsp;</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2270>then</a></code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1290>dup</a>&nbsp;<a class=ref href=lfsr.fs.html#497>lfsr</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0010>!</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;--&nbsp;lfsr&nbsp;)</code>
<br>

<code>
</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;Try&nbsp;to&nbsp;sign&nbsp;extend&nbsp;for&nbsp;32/64-bit&nbsp;forths</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;for&nbsp;signed&nbsp;coinflip.&nbsp;Unsigned&nbsp;coinflip&nbsp;is&nbsp;portable</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;regardless&nbsp;of&nbsp;word&nbsp;size.</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;dup&nbsp;8000&nbsp;and&nbsp;if</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;&nbsp;&nbsp;-1&nbsp;0ffff&nbsp;xor&nbsp;or</code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;then</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a></code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1170>decimal</a></code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=499>rnd</a></code>
<br>

<code>
&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;max&nbsp;--&nbsp;nextrand&nbsp;</code>
<br>

<code>
&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;next&nbsp;random&nbsp;value&nbsp;lesser&nbsp;than&nbsp;max&nbsp;)</code>
<br>

<code>
</code>
<br>

<code>
&nbsp;&nbsp;32767&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2260>swap</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0230>/</a>&nbsp;<a class=ref href=lfsr.fs.html#498>rand16</a>&nbsp;32767&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0720>and</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2260>swap</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0230>/</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a></code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;this&nbsp;requires&nbsp;rand16&nbsp;to&nbsp;be&nbsp;in&nbsp;range&nbsp;-32768..32767</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;bit-testing&nbsp;version&nbsp;is&nbsp;compatible&nbsp;with&nbsp;32/64-bit&nbsp;systems</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;:&nbsp;coinflip&nbsp;rand16&nbsp;0&lt;&nbsp;;</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.2.1660>hex</a></code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=500>coinflip</a>&nbsp;<a class=ref href=lfsr.fs.html#498>rand16</a>&nbsp;8000&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0720>and</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a></code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1170>decimal</a></code>
<br>

<code>
&nbsp;&nbsp;</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=501>rnd1+</a>&nbsp;<a class=ref href=lfsr.fs.html#499>rnd</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0290>1+</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a>&nbsp;&nbsp;&nbsp;&nbsp;</code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=502>any-between</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;a&nbsp;b&nbsp;--&nbsp;i&nbsp;)&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans7.htm#7.6.2.2535>\</a>&nbsp;a&nbsp;&lt;&nbsp;i&nbsp;&lt;&nbsp;b</code>
<br>

<code>
&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0380>2dup</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0540>></a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1700>if</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2260>swap</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2270>then</a></code>
<br>

<code>
&nbsp;&nbsp;&nbsp;&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1990>over</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0160>-</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0300>1-</a>&nbsp;<a class=ref href=lfsr.fs.html#501>rnd1+</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0120>+</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a></code>
<br>

<code>
</code>
<br>

<code>
<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0450>:</a>&nbsp;<a class=name name=503>dice-for-roomlight</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans11.htm#11.6.1.0080>(</a>&nbsp;dlvl&nbsp;--&nbsp;t|f&nbsp;)</code>
<br>

<code>
&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.1880>min</a>&nbsp;12&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.2260>swap</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0160>-</a>&nbsp;13&nbsp;<a class=ref href=lfsr.fs.html#499>rnd</a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0540>></a>&nbsp;<a class=ref href=http://forth.sourceforge.net/std/dpans/dpans6.htm#6.1.0460>;</a></code>
<br>

<code>
</code>
<br>

</div>
<p class=footer>Created with <a href=http://excamera.com/sphinx/docforth.html>docforth</a>
</body></html>
